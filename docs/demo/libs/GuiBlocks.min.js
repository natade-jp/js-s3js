/**
 * SBase.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */
class t{constructor(e,i){this.id="SComponent_"+(t._counter++).toString(16),this.wallid="SComponent_"+(t._counter++).toString(16),this.isshow=!1,this._element=null,this._wall=null,this.elementtype=e,this.unit=t.UNIT_TYPE.EM,this._initElement(),i&&this.setText(i)}static _attachMouseEvent(e){const i=function(){t._addClass(e,t.CLASS_NAME.MOUSEOVER)},s=function(){t._removeClass(e,t.CLASS_NAME.MOUSEOVER),t._removeClass(e,t.CLASS_NAME.MOUSEDOWN)},n=function(){t._addClass(e,t.CLASS_NAME.MOUSEDOWN)},l=function(){t._removeClass(e,t.CLASS_NAME.MOUSEDOWN)};e.addEventListener("touchstart",i,!1),e.addEventListener("touchend",l,!1),e.addEventListener("mouseover",i,!1),e.addEventListener("mouseout",s,!1),e.addEventListener("mousedown",n,!1),e.addEventListener("mouseup",l,!1)}static _removeNodeForId(e){const i=document.getElementById(e);return t._removeNode(i),i}static _AputB(e,i,s){if(!(e&&i&&i instanceof t))throw"IllegalArgumentException";if(e===i)throw"it referenced me";if(s!==t.PUT_TYPE.IN&&s!==t.PUT_TYPE.RIGHT&&s!==t.PUT_TYPE.NEWLINE)throw"IllegalArgumentException";let n=null;if("string"==typeof e)n=document.getElementById(e);else if(e instanceof t)if(s===t.PUT_TYPE.IN){if(!e.isContainer())throw"not Container";n=e.getContainerElement()}else n=e.element;if(null===n)throw"Not Found "+e;const l=function(t,e){e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)};if(i.removeMe(),s===t.PUT_TYPE.IN)i.onAdded(),null!==n.lastChild&&(i.getWall(t.PUT_TYPE.NEWLINE).style.display="block",n.appendChild(i.getWall())),i.element.style.display="inline-block",n.appendChild(i.element);else{if(null===n.parentNode)throw"not found element on the html";i.onAdded(),l(i.getWall(s),n),l(i.element,i.getWall(s)),s===t.PUT_TYPE.RIGHT?(n.style.display="inline-block",i.getWall(s).style.display="inline-block",i.element.style.display="inline-block"):s===t.PUT_TYPE.NEWLINE&&(n.style.display="inline-block",i.getWall(s).style.display="block",i.element.style.display="inline-block")}}static _setBooleanAttribute(t,e,i){if("string"!=typeof e||"boolean"!=typeof i)throw"IllegalArgumentException";const s=t.getAttribute(e);i||null!==s?i&&null!==s&&t.removeAttribute(e):t.setAttribute(e,e)}static _isBooleanAttribute(t,e){if("string"!=typeof e)throw"IllegalArgumentException";return null===t.getAttribute(e)}static _removeNode(t){return t&&t.parentNode&&t.parentNode.removeChild(t),t}static _removeChildNodes(t){let e=t.lastChild;for(;e;)t.removeChild(e),e=t.lastChild}static _isSetClass(t,e){const i=t.className;if(null===i)return!1;return new RegExp("(^"+e+"$)|( +"+e+")","g").test(i)}static _addClass(t,e){const i=t.className;if(null===i)return void(t.className=e);new RegExp("(^"+e+"$)|( +"+e+")","g").test(i)||(t.className=i+" "+e)}static _removeClass(t,e){const i=t.className;if(null===i)return;const s=new RegExp("(^"+e+"$)|( +"+e+")","g");s.test(i)&&(t.className=i.replace(s,""))}getWidth(){let t=this.element.style.width;return null===t?null:(t=t.match(/[+-]?\s*[0-9]*\.?[0-9]*/)[0],parseFloat(t))}getHeight(){let t=this.element.style.height;return null===t?null:(t=t.match(/[+-]?\s*[0-9]*\.?[0-9]*/)[0],parseFloat(t))}getSize(){return{width:this.getWidth(),height:this.getHeight()}}setWidth(t){if("number"!=typeof t)throw"IllegalArgumentException not number";this.element.style.width=t.toString()+this.unit}setHeight(t){if("number"!=typeof t)throw"IllegalArgumentException not number";this.element.style.height=t.toString()+this.unit}setSize(t,e){this.setWidth(t),this.setHeight(e)}removeMe(){t._removeNodeForId(this.id),t._removeNodeForId(this.wallid)}onAdded(){}getWall(e){if(this._wall)return this._wall;const i=document.createElement("span");return i.id=this.wallid,e===t.PUT_TYPE.RIGHT?i.className=t.CLASS_NAME.SPACE:e===t.PUT_TYPE.NEWLINE&&(i.className=t.CLASS_NAME.NEWLINE),i.style.display="inline-block",this._wall=i,i}isContainer(){return null!==this.getContainerElement()}getContainerElement(){return null}_initElement(){if(this._element)return;const e=document.createElement(this.elementtype);e.id=this.id,e.className=t.CLASS_NAME.COMPONENT,e.style.display="inline-block",this._element=e,t._attachMouseEvent(e)}get element(){return this._element}put(e,i){t._AputB(this,e,i)}putMe(e,i){t._AputB(e,this,i)}isVisible(){return null===this.element.style.visibility||"hidden"!==this.element.style.visibility}setVisible(t){t?(this.element.style.visibility="visible",this.getWall().style.visibility="visible"):(this.element.style.visibility="hidden",this.getWall().style.visibility="hidden")}getTextNode(){const t=this.element.childNodes;let e=null,i=0;for(i=0;i<t.length;i++)if(t[i]instanceof Text){e=t[i];break}return e}getElementNode(){const t=this.element.children;let e=null,i=0;for(i=0;i<t.length;i++)if(!(t[i]instanceof Text)){e=t[i];break}return e}getEditableNodeForValue(){return null}getEditableNodeForNodeValue(){if(null!==this.getEditableNodeForValue())return null;let t=this.getTextNode();if(null===t){const e=this.element;t=document.createTextNode(""),e.appendChild(t)}return t}setText(t){if(!t)return;let e=t instanceof Array?t:[t],i=null;i=this.getEditableNodeForValue(),i?i.value=e[0]:(i=this.getEditableNodeForNodeValue(),i&&(i.nodeValue=e[0]))}getText(){let t=null,e=null;return e=this.getEditableNodeForValue(),e&&(t=e.value),e=this.getEditableNodeForNodeValue(),e&&(t=e.nodeValue.trim()),null===t?"":t}getEnabledElement(){return null}setEnabled(e){e?t._removeClass(this.element,t.CLASS_NAME.DISABLED):t._addClass(this.element,t.CLASS_NAME.DISABLED);const i=this.getEnabledElement();null!==i&&t._setBooleanAttribute(i,"disabled",e)}isEnabled(){return!t._isSetClass(this.element,t.CLASS_NAME.DISABLED)}getId(){return this.id}getUnit(){return this.unit}setUnit(t){this.unit=t}addClass(e){return t._addClass(this.element,e)}toString(){return this.elementtype+"("+this.id+")"}}t.PUT_TYPE={IN:0,RIGHT:1,NEWLINE:2},t.UNIT_TYPE={PX:"px",EM:"em",PERCENT:"%"},t.LABEL_POSITION={LEFT:0,RIGHT:1},t.CLASS_NAME={MOUSEOVER:"SCOMPONENT_MouseOver",MOUSEDOWN:"SCOMPONENT_MouseDown",DISABLED:"SCOMPONENT_Disabled",COMPONENT:"SCOMPONENT_Component",NEWLINE:"SCOMPONENT_Newline",CLOSE:"SCOMPONENT_Close",OPEN:"SCOMPONENT_Open",SPACE:"SCOMPONENT_Space",CONTENTSBOX:"SCOMPONENT_ContentsBox",PANEL:"SCOMPONENT_Panel",PANEL_LEGEND:"SCOMPONENT_PanelLegend",SLIDEPANEL:"SCOMPONENT_SlidePanel",SLIDEPANEL_LEGEND:"SCOMPONENT_SlidePanelLegend",SLIDEPANEL_SLIDE:"SCOMPONENT_SlidePanelSlide",GROUPBOX:"SCOMPONENT_GroupBox",GROUPBOX_LEGEND:"SCOMPONENT_GroupBoxLegend",IMAGEPANEL:"SCOMPONENT_ImagePanel",LABEL:"SCOMPONENT_Label",SELECT:"SCOMPONENT_Select",COMBOBOX:"SCOMPONENT_ComboBox",CHECKBOX:"SCOMPONENT_CheckBox",CHECKBOX_IMAGE:"SCOMPONENT_CheckBoxImage",BUTTON:"SCOMPONENT_Button",FILELOAD:"SCOMPONENT_FileLoad",FILESAVE:"SCOMPONENT_FileSave",CANVAS:"SCOMPONENT_Canvas",PROGRESSBAR:"SCOMPONENT_ProgressBar",SLIDER:"SCOMPONENT_Slider",COLORPICKER:"SCOMPONENT_ColorPicker"},t._counter=0;
/**
 * SCanvas.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */
class e extends t{constructor(){super("canvas"),this.addClass(t.CLASS_NAME.CANVAS),this.canvas=this.element,this.setPixelSize(300,150)}getPixelSize(){return{width:this.canvas.width,height:this.canvas.height}}getCanvas(){return this.canvas}setPixelSize(t,e){if(2!==arguments.length||"number"!=typeof t||"number"!=typeof e||t<0||e<0)throw"IllegalArgumentException";t=~~Math.floor(t),e=~~Math.floor(e),this.canvas.width=t,this.canvas.height=e}getContext(){return void 0===this.context&&(this.context=this.canvas.getContext("2d")),this.context}clear(){this.getContext().clearRect(0,0,this.canvas.width,this.canvas.height)}getImageData(){return this.getContext().getImageData(0,0,this.canvas.width,this.canvas.height)}putImageData(t){this.getContext().putImageData(t,0,0)}_putImage(i,s,n){const l=this.canvas;let r=0,a=0,o=l.width,h=l.height;if(void 0===i.width||void 0===i.height)return;const d=i.width,u=i.height;e.drawtype.ORIGINAL===n?(o=d,h=u):e.drawtype.STRETCH===n||e.drawtype.FILL_ASPECT_RATIO===n?(o=l.width,h=l.height):(o=d,h=u,e.drawtype.ASPECT_RATIO===n&&(o>l.width&&(o=l.width,h=Math.floor(h*(o/d))),h>l.height&&(o=Math.floor(o*(l.height/h)),h=l.height)),e.drawtype.LETTER_BOX===n&&(o=l.width,h=Math.floor(h*(o/d)),h>l.height&&(o=Math.floor(o*(l.height/h)),h=l.height),r=Math.floor((l.width-o)/2),a=Math.floor((l.height-h)/2),s=!1)),s&&(this.setUnit(t.UNIT_TYPE.PX),this.setSize(o,h),this.setPixelSize(o,h)),this.clear(),i instanceof ImageData?this.context.putImageData(i,0,0,r,a,o,h):this.context.drawImage(i,0,0,d,u,r,a,o,h)}putImage(t,i,s,n){if(n||(n=null),void 0===s&&(s=e.drawtype.LETTER_BOX),void 0===i&&(i=!1),t instanceof Image||t instanceof ImageData)this._putImage(t,i,s),"function"==typeof n&&n();else if("string"==typeof t){const e=this,l=new Image;l.onload=function(){e.putImage(l,i,s,n)},l.src=t}else if(t instanceof e)this.putImage(t.canvas,i,s,n);else if(t instanceof HTMLCanvasElement&&"CANVAS"===t.tagName)this.putImage(t.toDataURL(),i,s,n);else{if(!(t instanceof Blob||t instanceof File))throw"IllegalArgumentException";{const e=this,l=new FileReader;l.onload=function(){e.putImage(l.result,i,s,n)},l.readAsDataURL(t)}}}toDataURL(t){return t||(t="image/png"),this.canvas.toDataURL(t)}}e.drawtype={ORIGINAL:0,ASPECT_RATIO:1,STRETCH:2,LETTER_BOX:3,FILL_ASPECT_RATIO:4};class i{constructor(){this._r=0,this._g=0,this._b=0,this._a=1}limit(){const t=new i;return t._r=i._limit(this._r),t._g=i._limit(this._g),t._b=i._limit(this._b),t._a=i._limit(this._a),t}bake(){const t=new i;return t._r=this._r*this._a,t._g=this._g*this._a,t._b=this._b*this._a,t._a=1,t.limit()}addColorMixture(t){if(!(t instanceof i))throw"IllegalArgumentException";return i.newColorNormalizedRGB(this._r+t._r*t._a,this._g+t._g*t._a,this._b+t._b*t._a,this._a)}subColorMixture(t){if(!(t instanceof i))throw"IllegalArgumentException";const e=Math.min(this._r,t._r),s=Math.min(this._g,t._g),n=Math.min(this._b,t._b);return i.newColorNormalizedRGB(i._mix(this._r,e,t._a),i._mix(this._g,s,t._a),i._mix(this._b,n,t._a),this._a)}mul(t){if(t instanceof i)return i.newColorNormalizedRGB(this._r*t._r,this._g*t._g,this._b*t._b,this._a*t._a);if("number"==typeof t)return i.newColorNormalizedRGB(this._r*t,this._g*t,this._b*t,this._a);throw"IllegalArgumentException"}clone(){const t=new i;return t._r=this._r,t._g=this._g,t._b=this._b,t._a=this._a,t}equals(t){return i._equals(this._r,t._r)&&i._equals(this._g,t._g)&&i._equals(this._b,t._b)&&i._equals(this._a,t._a)}toString(){return"NTColor["+this.toCSSHex()+", "+this.toCSS255()+", "+this.toCSSPercent()+"]"}static _mix(t,e,i){return t+(e-t)*i}static _limit(t){return Math.max(Math.min(t,1),0)}static _equals(t,e){const i=Number.EPSILON;return Math.abs(t-e)<i}static _flact(t){return t-Math.floor(t)}static _hex(t){const e=Math.round(255*t).toString(16);return 1===e.length?"0"+e:e}static _ftos(t){const e=Math.trunc(t);return e.toString()+"."+Math.round(1e3*(t-e))}_setRGB(t,e,i,s){return this._r=t,this._g=e,this._b=i,void 0!==s&&(this._a=s),this}_setHSV(t,e,i,s){let n,l;return this._r=i,this._g=i,this._b=i,s&&(this._a=s),e>0&&(t*=6,n=~~Math.floor(t),l=t-n,0===n?(this._g*=1-e*(1-l),this._b*=1-e):1===n?(this._r*=1-e*l,this._b*=1-e):2===n?(this._r*=1-e,this._b*=1-e*(1-l)):3===n?(this._r*=1-e,this._g*=1-e*l):4===n?(this._r*=1-e*(1-l),this._g*=1-e):5===n&&(this._g*=1-e,this._b*=1-e*l)),this}_setHSL(t,e,i,s){if(s&&(this._a=s),0===e)return this._r=0,this._g=0,this._b=0,this;let n;n=i<.5?i*(1+e):i*(1-e)+e;const l=2*i-n,r=n-l;t*=6;const a=~~Math.floor(t),o=t-a;return 0===a?(this._r=n,this._g=n-r*(1-o),this._b=l):1===a?(this._r=l+r*(1-o),this._g=n,this._b=l):2===a?(this._r=l,this._g=n,this._b=n-r*(1-o)):3===a?(this._r=l,this._g=l+r*(1-o),this._b=n):4===a?(this._r=n-r*(1-o),this._g=l,this._b=n):5===a&&(this._r=n,this._g=l,this._b=l+r*(1-o)),this}_getRGB(){return{r:this._r,g:this._g,b:this._b,a:this._a}}_getHSV(){const t=Math.max(this._r,this._g,this._b),e=Math.min(this._r,this._g,this._b),i=t-e;let s=0,n=t-e;const l=t;return 0!==t&&(n/=t),0===i||(t===this._r?(s=(this._g-this._b)/i,s<0&&(s+=6)):s=t===this._g?2+(this._b-this._r)/i:4+(this._r-this._g)/i,s/=6),{h:s,s:n,v:l,a:this._a}}_getHSL(){const t=Math.max(this._r,this._g,this._b),e=Math.min(this._r,this._g,this._b),i=.5*(t+e),s=t-e;if(0===s)return{h:0,l:i,s:0,a:this._a};let n,l;return n=i<.5?s/(t+e):s/(2-t-e),t===this._r?(l=(this._g-this._b)/s,l<0&&(l+=6)):l=t===this._g?2+(this._b-this._r)/s:4+(this._r-this._g)/s,l/=6,{h:l,s:n,l:i,a:this._a}}toNormalizedRGB(){return this._getRGB()}toRGB(){return{r:Math.round(255*this._r),g:Math.round(255*this._g),b:Math.round(255*this._b),a:Math.round(255*this._a)}}toRRGGBB(){return Math.round(255*i._limit(this._r))<<16|Math.round(255*i._limit(this._g))<<8|Math.round(255*i._limit(this._b))}toAARRGGBB(){return 16777216*Math.round(255*i._limit(this._a))+(Math.round(255*i._limit(this._r))<<16)+(Math.round(255*i._limit(this._g))<<8)+Math.round(255*i._limit(this._b))}toNormalizedHSV(){return this._getHSV()}toHSV(){const t=this.toNormalizedHSV();return t.h=Math.round(360*t.h),t.s=Math.round(255*t.s),t.v=Math.round(255*t.v),t.a=Math.round(255*t.a),t}toNormalizedHSL(){return this._getHSL()}toHSL(){const t=this.toNormalizedHSL();return t.h=Math.round(360*t.h),t.s=Math.round(255*t.s),t.l=Math.round(255*t.l),t.a=Math.round(255*t.a),t}get r(){return this._r}get g(){return this._g}get b(){return this._b}get a(){return this._a}get ir(){return Math.round(255*this._r)}get ig(){return Math.round(255*this._g)}get ib(){return Math.round(255*this._b)}get ia(){return Math.round(255*this._a)}get pr(){return 100*this._r}get pg(){return 100*this._g}get pb(){return 100*this._b}get pa(){return 100*this._a}brighter(){return this.mul(1/.7).limit()}darker(){return this.mul(.7).limit()}toCSSHex(){const t=this.limit();return i._equals(this.a,1)?"#"+i._hex(t.r)+i._hex(t.g)+i._hex(t.b):"#"+i._hex(t.a)+i._hex(t.r)+i._hex(t.g)+i._hex(t.b)}toCSS255(){const t=this.limit();return i._equals(t.a,1)?"rgb("+t.ir+","+t.ig+","+t.ib+")":"rgba("+t.ir+","+t.ig+","+t.ib+","+i._ftos(t.a)+")"}toCSSPercent(){const t=this.limit();return i._equals(t.a,1)?"rgb("+Math.round(t.pr)+"%,"+Math.round(t.pg)+"%,"+Math.round(t.pb)+"%)":"rgba("+Math.round(t.pr)+"%,"+Math.round(t.pg)+"%,"+Math.round(t.pb)+"%,"+Math.round(t.pa)+"%)"}setAlpha(t){const e=this.clone();return e._a=t,e}static newColorNormalizedRGB(t,e,s,n){let l=0,r=0,a=0,o=1;if(1===arguments.length){if("object"!=typeof t)throw"newColorNormalizedRGB";Array.isArray(t)?(t.length>=3&&(l=t[0],r=t[1],a=t[2]),t.length>=4&&(o=t[3])):(void 0!==t.r&&(l=t.r),void 0!==t.g&&(r=t.g),void 0!==t.b&&(a=t.b),void 0!==t.a&&(o=t.a))}else arguments.length>=3&&(l=arguments[0],r=e,a=s),arguments.length>=4&&(o=n);const h=new i;return h._setRGB(l,r,a,o),h}static newColorRGB(t,e,s,n){let l=0,r=0,a=0,o=255;if(arguments.length<=2)if("number"==typeof t)l=t>>16&255,r=t>>8&255,a=255&t,(t>16777215||e)&&(o=t>>24&255);else{if("object"!=typeof t)throw"newColorNormalizedRGB";Array.isArray(t)?(t.length>=3&&(l=t[0],r=t[1],a=t[2]),t.length>=4&&(o=t[3])):(void 0!==t.r&&(l=t.r),void 0!==t.g&&(r=t.g),void 0!==t.b&&(a=t.b),void 0!==t.a&&(o=t.a))}else arguments.length>=3&&(l=arguments[0],r=arguments[1],a=arguments[2],arguments.length>=4&&(o=arguments[3]));const h=new i;return h._setRGB(l/255,r/255,a/255,o/255),h}static newColorNormalizedHSV(t,e,s,n){let l=0,r=0,a=0,o=1;if(1===arguments.length){if("object"!=typeof t)throw"newColorNormalizedHSV";Array.isArray(t)?(t.length>=3&&(l=t[0],r=t[1],a=t[2]),t.length>=4&&(o=t[3])):(void 0!==t.h&&(l=t.h),void 0!==t.s&&(r=t.s),void 0!==t.v&&(a=t.v),void 0!==t.a&&(o=t.a))}else arguments.length>=3&&(l=arguments[0],r=e,a=s),arguments.length>=4&&(o=n);r=i._limit(r),a=i._limit(a);const h=new i;return h._setHSV(i._flact(l),r,a,o),h}static newColorHSV(t,e,s,n){let l=0,r=0,a=0,o=255;if(arguments.length<=2){if("object"!=typeof t)throw"newColorNormalizedRGB";Array.isArray(t)?(t.length>=3&&(l=t[0],r=t[1],a=t[2]),t.length>=4&&(o=t[3])):(void 0!==t.h&&(l=t.h),void 0!==t.s&&(r=t.s),void 0!==t.v&&(a=t.v),void 0!==t.a&&(o=t.a))}else arguments.length>=3&&(l=arguments[0],r=e,a=s,arguments.length>=4&&(o=n));return i.newColorNormalizedHSV(l/360,r/255,a/255,o/255)}static newColorNormalizedHSL(t,e,s,n){let l=0,r=0,a=0,o=1;if(1===arguments.length){if("object"!=typeof t)throw"newColorNormalizedHSL";Array.isArray(t)?(t.length>=3&&(l=t[0],r=t[1],a=t[2]),t.length>=4&&(o=t[3])):(void 0!==t.h&&(l=t.h),void 0!==t.s&&(r=t.s),void 0!==t.l&&(a=t.l),void 0!==t.a&&(o=t.a))}else arguments.length>=3&&(l=arguments[0],r=e,a=s),arguments.length>=4&&(o=n);r=i._limit(r),a=i._limit(a);const h=new i;return h._setHSL(i._flact(l),r,a,o),h}static newColorHSL(t,e,s,n){let l=0,r=0,a=0,o=255;if(arguments.length<=2){if("object"!=typeof t)throw"newColorNormalizedRGB";Array.isArray(t)?(t.length>=3&&(l=t[0],r=t[1],a=t[2]),t.length>=4&&(o=t[3])):(void 0!==t.h&&(l=t.h),void 0!==t.s&&(r=t.s),void 0!==t.l&&(a=t.l),void 0!==t.a&&(o=t.a))}else arguments.length>=3&&(l=arguments[0],r=e,a=s,arguments.length>=4&&(o=n));return i.newColorNormalizedHSL(l/360,r/255,a/255,o/255)}static get WHITE(){return i.newColorRGB(16777215)}static get LIGHT_GRAY(){return i.newColorRGB(13882323)}static get GRAY(){return i.newColorRGB(8421504)}static get DARK_GRAY(){return i.newColorRGB(11119017)}static get BLACK(){return i.newColorRGB(0)}static get RED(){return i.newColorRGB(16711680)}static get PINK(){return i.newColorRGB(16761035)}static get ORANGE(){return i.newColorRGB(16753920)}static get YELLOW(){return i.newColorRGB(16776960)}static get GREEN(){return i.newColorRGB(32768)}static get MAGENTA(){return i.newColorRGB(16711935)}static get CYAN(){return i.newColorRGB(65535)}static get BLUE(){return i.newColorRGB(255)}}
/**
 * SColorPicker.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */
/**
 * SFileLoadButton.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */
class s extends t{constructor(e){super("label",e),this.addClass(t.CLASS_NAME.BUTTON),this.addClass(t.CLASS_NAME.FILELOAD);const i=super.element,s=document.createElement("input");i.style.textAlign="center",s.setAttribute("type","file"),s.id=this.getId()+"_file",s.style.display="none",this.file=s,i.appendChild(s)}getEnabledElement(){return this.file}getFileAccept(){const t=this.file.getAttribute("accept");return null===t?"":t}setFileAccept(t){t===s.FILE_ACCEPT.DEFAULT?null!==this.file.getAttribute("accept")&&this.file.removeAttribute("accept"):this.file.accept=t}addListener(t){this.file.addEventListener("change",(function(e){t(e.target.files)}),!1)}}s.FILE_ACCEPT={DEFAULT:"",IMAGE:"image/*",AUDIO:"audio/*",VIDEO:"video/*",TEXT:"text/*",PNG:"image/png",JPEG:"image/jpg",GIF:"image/gif"};
/**
 * GuiBlocks.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */
const n={Button:
/**
 * SButton.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */
class extends t{constructor(e){super("input",e),this.addClass(t.CLASS_NAME.BUTTON);this.element.type="button"}getEditableNodeForValue(){return this.element}getEnabledElement(){return this.element}addListener(t){this.element.addEventListener("click",t,!1)}},Canvas:e,CheckBox:
/**
 * SCheckBox.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */
class extends t{constructor(e){super("label"),this.addClass(t.CLASS_NAME.LABEL),this.addClass(t.CLASS_NAME.CHECKBOX);const i=document.createElement("input");i.type="checkbox",i.id=this.getId()+"_checkbox",i.className=t.CLASS_NAME.CHECKBOX_IMAGE,this.checkbox=i,this.textnode=document.createTextNode(e||"");const s=this.element;s.appendChild(this.checkbox),s.appendChild(this.textnode)}getEnabledElement(){return this.checkbox}getTextNode(){return this.textnode}getElementNode(){return this.checkbox}setLabelPosition(e){const i=this.element,s=this.getTextNode(),n=this.getElementNode();t._removeChildNodes(i),e===t.LABEL_POSITION.LEFT?(i.appendChild(s),i.appendChild(n)):(i.appendChild(n),i.appendChild(s))}setCheckBoxImageSize(t){if("number"!=typeof t)throw"IllegalArgumentException not number";this.checkbox.style.height=t.toString()+this.unit,this.checkbox.style.width=t.toString()+this.unit}addListener(t){this.checkbox.addEventListener("change",t,!1)}setChecked(t){this.checkbox.checked=t}isChecked(){return this.checkbox.checked}},Color:i,ColorPicker:class extends t{constructor(){super("div"),this.addClass(t.CLASS_NAME.COLORPICKER);const e=this.element,s=this,n={H:{div:document.createElement("div"),split:6,value:0,input:null,gauge:null,color_data:[],color_node:[],is_press:!1},S:{div:document.createElement("div"),split:1,value:.5,input:null,gauge:null,color_data:[],color_node:[],is_press:!1},L:{div:document.createElement("div"),split:2,value:.5,input:null,gauge:null,color_data:[],color_node:[],is_press:!1}};for(let t=0;t<=n.H.split;t++){const e=1/n.H.split*t;n.H.color_data.push(i.newColorNormalizedHSL([e,1,.5]).toCSSHex())}const l=function(t){if("H"!==t&&"L"!==t&&"S"!==t)return;return function(e){if(Array.isArray(e)&&(e=e[0]),n[t].is_press){const i=e.target,l=i instanceof HTMLElement?i:e.currentTarget instanceof HTMLElement?e.currentTarget:null;if(!l)return;"H"!==t&&"L"!==t&&"S"!==t||(n[t].value=e.offsetX/l.clientWidth),s.redraw()}}},r=function(t,e){if("H"!==t&&"L"!==t&&"S"!==t)return;return function(i){if(Array.isArray(i)&&(i=i[0]),n[t].is_press=e,e){const e=l(t);"function"==typeof e&&e(i)}}},a=function(t){if("H"!==t&&"L"!==t&&"S"!==t)return;const e=document.createElement("span"),i=document.createElement("div"),a=document.createElement("input");e.style.display="inline-block",i.style.display="inline-block",a.style.display="inline-block",e.style.verticalAlign="top",i.style.verticalAlign="top",a.style.verticalAlign="top",e.style.height="100%",i.style.height="100%",a.style.height="100%",e.style.margin="0px",e.style.padding="0px",e.style.textAlign="center",i.style.margin="0px 0.5em 0px 0.5em",i.style.padding="0px",i.style.borderStyle="solid",i.style.borderWidth="1px",a.addEventListener("input",function(t){if("H"!==t&&"L"!==t&&"S"!==t)return;return function(e){Array.isArray(e)&&(e=e[0]);let i=e.target;const l=i instanceof HTMLInputElement?i:e.currentTarget instanceof HTMLInputElement?e.currentTarget:null;l&&(n[t].value=parseFloat(l.value)/100,s.redraw())}}(t),!1),a.type="number",a.style.margin="0px",a.style.padding="0px",a.style.borderStyle="none",a.min="0.0",a.max="100.0",a.step="1.0",n[t].input=a,e.style.width="1.5em",i.style.width="calc(100% - 6.0em)",a.style.width="3.5em",function(t,e){if("H"!==e&&"L"!==e&&"S"!==e)return;const i=document.createElement("div"),s=document.createElement("div"),a=document.createElement("div");t.style.position="relative",i.style.position="absolute",s.style.position="absolute",a.style.position="absolute",i.style.margin="0px",i.style.padding="0px",s.style.margin="0px",s.style.padding="0px",a.style.margin="0px",a.style.padding="0px",i.addEventListener("mousedown",r(e,!0),!1),i.addEventListener("mouseup",r(e,!1),!1),i.addEventListener("mouseout",r(e,!1),!1),i.addEventListener("mousemove",l(e),!1),i.addEventListener("touchstart",r(e,!0),!1),i.addEventListener("touchend",r(e,!1),!1),i.addEventListener("touchcancel",r(e,!1),!1),i.dataset.name=e,i.style.width="100%",i.style.height="100%",i.style.bottom="0px",s.style.width="33%",s.style.height="100%",s.style.bottom="0px",s.style.borderStyle="ridge",s.style.borderWidth="0px 2px 0px 0px",n[e].gauge=s;const o=n[e].split;a.style.width="100%",a.style.height="100%",a.style.overflow="hidden";for(let t=0;t<o;t++){const t=document.createElement("div");t.style.display="inline-block",t.style.margin="0px",t.style.padding="0px",t.style.height="100%",t.style.width=100/o+"%",t.style.background="linear-gradient(to right, #000, #FFF)",n[e].color_node.push(t),a.appendChild(t)}t.appendChild(a),t.appendChild(s),t.appendChild(i)}(i,t);const o=n[t].div;o.style.height="1.2em",o.style.margin="0.5em 0px 0.5em 0px",e.appendChild(document.createTextNode(t)),o.appendChild(e),o.appendChild(i),o.appendChild(a)};for(const t in n)a(t);this.hls=n,this.listener=[],this.redraw(),e.appendChild(this.hls.H.div),e.appendChild(this.hls.S.div),e.appendChild(this.hls.L.div)}setColor(t){if(!(t instanceof i))throw"ArithmeticException";const e=this.hls,s=t.toNormalizedHSL();e.H.value=s.h,e.S.value=s.s,e.L.value=s.l,this.redraw()}getColor(){const t=this.hls,e=t.H.value,s=t.S.value,n=t.L.value;return i.newColorNormalizedHSL([e,s,n])}redraw(){const t=this.hls,e=t.H.value,s=t.S.value,n=t.L.value;t.S.color_data=[i.newColorNormalizedHSL([e,0,n]).toCSSHex(),i.newColorNormalizedHSL([e,1,n]).toCSSHex()],t.L.color_data=[i.newColorNormalizedHSL([e,s,0]).toCSSHex(),i.newColorNormalizedHSL([e,s,.5]).toCSSHex(),i.newColorNormalizedHSL([e,s,1]).toCSSHex()];for(const e in t){if("H"!==e&&"L"!==e&&"S"!==e)return;const i=t[e].color_data,s=t[e].color_node;for(let t=0;t<s.length;t++)s[t].style.background="linear-gradient(to right, "+i[t]+", "+i[t+1]+")";const n=Math.round(100*t[e].value);t[e].gauge.style.width=n+"%",t[e].input.value=n.toString()}for(let t=0;t<this.listener.length;t++)this.listener[t]()}addListener(t){this.listener.push(t)}}
/**
 * SComboBox.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */,ComboBox:class extends t{constructor(e){super("select",e),this.addClass(t.CLASS_NAME.SELECT),this.addClass(t.CLASS_NAME.COMBOBOX),this.select=this.element}getEnabledElement(){return this.select}addListener(t){this.select.addEventListener("change",t,!1)}setText(t){if(!t)return;"string"==typeof t&&(t=[t]);const e=this.element;let i=e.lastChild;for(;i;)e.removeChild(i),i=e.lastChild;let s=0;for(s=0;s<t.length;s++){const i=document.createElement("option");i.text=t[s].toString(),i.value=t[s].toString(),e.appendChild(i)}}getText(){const t=this.element.children;let e=0;const i=[];for(e=0;e<t.length;e++)if("OPTION"===t[e].tagName){const s=t[e];i[i.length]=s.text}return i}setSelectedItem(t){const e=this.select.children;let i=0,s=0;for(i=0;i<e.length;i++)if("OPTION"===e[i].tagName){if(e[i].value===t.toString()){this.select.selectedIndex=s;break}s++}}getSelectedItem(){const t=this.select.children,e=this.select.selectedIndex;let i=0,s=0;for(i=0;i<t.length;i++)if("OPTION"===t[i].tagName){const n=t[i];if(e===s)return n.value;s++}return""}},FileLoadButton:s,FileSaveButton:
/**
 * SFileSaveButton.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */
class extends t{constructor(e){super("a",e),this.addClass(t.CLASS_NAME.BUTTON),this.addClass(t.CLASS_NAME.FILESAVE),this.filename="",this.url="",this.element.setAttribute("download",this.filename)}getFileName(){return this.filename}setFileName(t){this.filename=t,this.element.setAttribute("download",this.filename)}setURL(t){this.element.href=t,this.url=t}setEnabled(t){this.isEnabled()!==t&&(t?this.element.href=this.url:this.element.removeAttribute("href")),super.setEnabled(t)}}
/**
 * SGroupBox.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */,GroupBox:class extends t{constructor(e){super("fieldset"),this.addClass(t.CLASS_NAME.GROUPBOX),this.legend=document.createElement("legend"),t._addClass(this.legend,t.CLASS_NAME.GROUPBOX_LEGEND),this.legend.id=this.getId()+"_legend",this.legend.textContent=e,this.body=document.createElement("div"),t._addClass(this.body,t.CLASS_NAME.CONTENTSBOX),this.body.id=this.getId()+"_body";const i=this.element;i.appendChild(this.legend),i.appendChild(this.body)}getEnabledElement(){return this.element}getContainerElement(){return this.body}clear(){t._removeChildNodes(this.body)}}
/**
 * SImagePanel.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */,ImagePanel:class extends t{constructor(){super("div"),this.addClass(t.CLASS_NAME.IMAGEPANEL);const e=document.createElement("img");e.id=this.id+"_img",this.image=e,this.element.appendChild(this.image)}clear(){t._removeChildNodes(this.element)}toDataURL(){return this.image.src}putImageData(t){this.putImage(t)}putImage(t,i){if(i||(i=null),"string"==typeof t)this.image.onload=function(){"function"==typeof i&&i()},this.image.src=t;else if(t instanceof ImageData){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;e.getContext("2d").putImageData(t,0,0),this.putImage(e,i)}else if(t instanceof Image)this.image.src=t.src;else if(t instanceof e)this.putImage(t.canvas,i);else if(t instanceof HTMLCanvasElement&&"CANVAS"===t.tagName)try{this.putImage(t.toDataURL("image/png"),i)}catch(e){try{this.putImage(t.toDataURL("image/jpeg"),i)}catch(t){}}else{if(!(t instanceof Blob||t instanceof File))throw"IllegalArgumentException";{const e=this,s=new FileReader;s.onload=function(){if("string"!=typeof s.result)throw"Unexpected result type from FileReader";e.putImage(s.result,i)},s.readAsDataURL(t)}}}}
/**
 * SLabel.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */,Label:class extends t{constructor(e){super("div",e),this.addClass(t.CLASS_NAME.LABEL)}getContainerElement(){return this.element}}
/**
 * SPanel.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */,Panel:class extends t{constructor(e){super("div",null),this.addClass(t.CLASS_NAME.PANEL);const i=this.element;this.legend=document.createElement("span"),t._addClass(this.legend,t.CLASS_NAME.PANEL_LEGEND),this.legend.id=this.getId()+"_legend",this.body=document.createElement("div"),t._addClass(this.body,t.CLASS_NAME.CONTENTSBOX),this.body.id=this.getId()+"_body";const s=this;this.paneltool={setText:function(t){t?(s.legend.textContent=t,s.legend.style.display="block"):s.legend.style.display="none"}},this.paneltool.setText(e),i.appendChild(this.legend),i.appendChild(this.body)}setText(t){this.paneltool&&this.paneltool.setText(t)}getContainerElement(){return this.body}clear(){t._removeChildNodes(this.body)}}
/**
 * SProgressBar.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */,ProgressBar:class extends t{constructor(e,i){if(super("label"),this.addClass(t.CLASS_NAME.LABEL),this.addClass(t.CLASS_NAME.PROGRESSBAR),this.min=0,this.max=0,this.value=e,this.is_indeterminate=!1,0===arguments.length)this.min=0,this.max=1;else{if(2!==arguments.length)throw"IllegalArgumentException";this.min=e,this.max=i}this.progress=document.createElement("progress"),this.element.appendChild(this.progress),this.progress.id=this.getId()+"_progress",this.progress.className=t.CLASS_NAME.PROGRESSBAR,this.progress.value=0,this.progress.max=1}setMaximum(t){this.max=t}setMinimum(t){this.min=t}getMaximum(){return this.max}getMinimum(){return this.min}setValue(t){this.value=t,this.progress.value=this.getPercentComplete()}getValue(){return this.value}setIndeterminate(t){this.is_indeterminate=t,this.is_indeterminate?this.progress.removeAttribute("value"):this.setValue(this.value)}isIndeterminate(){return this.is_indeterminate}getPercentComplete(){const t=this.max-this.min;return(this.value-this.min)/t}}
/**
 * SSlidePanel.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */,SlidePanel:class extends t{constructor(e){super("div"),this.addClass(t.CLASS_NAME.SLIDEPANEL),this.textnode=document.createTextNode(e||""),this.legend=document.createElement("span"),t._addClass(this.legend,t.CLASS_NAME.SLIDEPANEL_LEGEND),this.legend.id=this.getId()+"_legend",this.legend.appendChild(this.textnode),this.slide=document.createElement("div"),t._addClass(this.slide,t.CLASS_NAME.SLIDEPANEL_SLIDE),this.slide.id=this.getId()+"_slide",this.body=document.createElement("div"),t._addClass(this.body,t.CLASS_NAME.CONTENTSBOX),this.body.id=this.getId()+"_body";const i=this;this.legend.addEventListener("click",(function(){i.setOpen(!i.isOpen())})),this.setOpen(!1),this.slide.appendChild(this.body);const s=super.element;s.appendChild(this.legend),s.appendChild(this.slide)}setOpen(e){this.is_open=e,this.is_open?(this.slide.style.maxHeight=this.body.scrollHeight+"px",t._addClass(this.legend,t.CLASS_NAME.OPEN),t._removeClass(this.legend,t.CLASS_NAME.CLOSE)):(this.slide.style.maxHeight=null,t._addClass(this.legend,t.CLASS_NAME.CLOSE),t._removeClass(this.legend,t.CLASS_NAME.OPEN))}isOpen(){return this.is_open}getTextNode(){return this.textnode}getContainerElement(){return this.body}clear(){t._removeChildNodes(this.body)}}
/**
 * SSlider.js
 *
 * @module GuiBlocks
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */,Slider:class extends t{constructor(e,i){super("label"),this.addClass(t.CLASS_NAME.LABEL),this.addClass(t.CLASS_NAME.SLIDER);let s=0,n=1;if(2===arguments.length)s=e,n=i;else if(2!==arguments.length)throw"IllegalArgumentException";this.slider=document.createElement("input"),this.slider.id=this.getId()+"_slider",this.slider.type="range",this.slider.className=t.CLASS_NAME.SLIDER,this.slider.value=s.toString(),this.slider.min=s.toString(),this.slider.max=n.toString(),this.slider.step=((i-e)/100).toString(),this.datalist=document.createElement("datalist"),this.datalist.id=this.getId()+"_datalist",this.slider.setAttribute("list",this.datalist.id),this.element.appendChild(this.slider),this.element.appendChild(this.datalist)}getEnabledElement(){return this.slider}setMaximum(t){this.slider.max=t.toString()}setMinimum(t){this.slider.min=t.toString()}getMaximum(){return parseFloat(this.slider.max)}getMinimum(){return parseFloat(this.slider.min)}setValue(t){this.slider.value=t.toString()}getValue(){return parseFloat(this.slider.value)}setMinorTickSpacing(t){this.slider.step=t.toString()}getMinorTickSpacing(){return parseFloat(this.slider.step)}setMajorTickSpacing(t){let e;this.majortick=t,this.removeMajorTickSpacing();const i=this.getMinimum(),s=this.getMaximum();for(e=i;e<=s;e+=t){const t=document.createElement("option");t.value=e.toString(),this.datalist.appendChild(t)}}getMajorTickSpacing(){return this.majortick}removeMajorTickSpacing(){const t=this.datalist;let e=t.lastChild;for(;e;)t.removeChild(e),e=t.lastChild}addListener(t){let e=!1;const i=this,s=function(){e=!0},n=function(){e&&(i.slider.disabled||t(),e=!1)};this.slider.addEventListener("touchstart",s,!1),this.slider.addEventListener("touchend",n,!1),this.slider.addEventListener("mousedown",s,!1),this.slider.addEventListener("mouseup",n,!1)}getWidth(){let t=this.slider.width;return null===t?null:parseFloat(t.toString().match(/[+-]?\s*[0-9]*\.?[0-9]*/)[0])}getHeight(){let t=this.slider.height;return null===t?null:parseFloat(t.toString().match(/[+-]?\s*[0-9]*\.?[0-9]*/)[0])}setWidth(t){if("number"!=typeof t)throw"IllegalArgumentException not number";super.setWidth(t),this.slider.style.width=t.toString()+this.unit}setHeight(t){if("number"!=typeof t)throw"IllegalArgumentException not number";super.setHeight(t),this.slider.style.height=t.toString()+this.unit}},PUT_TYPE:t.PUT_TYPE,UNIT_TYPE:t.UNIT_TYPE,LABEL_POSITION:t.LABEL_POSITION,FILE_ACCEPT:s.FILE_ACCEPT};export{n as default};
